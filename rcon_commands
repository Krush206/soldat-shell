#!/bin/bash

echo 'password'
echo 'The rcon_commands shell script has been enabled!'

while read -r cmds
do
  if echo -n ''$cmds'' | grep -qa '^\[.*] !cmds$'
  then
    echo "/say !date, !info, !script, !red, !blue, !spec"
  elif echo -n ''$cmds'' | grep -qa '^\[.*] !script$' || \
  echo -n ''$cmds'' | grep -qa '^\[.*] !license$' || \
  echo -n ''$cmds'' | grep -qa '^\[.*] !source$'
  then
    echo "/say Soldat Shell - A Unix shell script made by a Unix guru."
    echo "/say Soldat Shell is released under the terms of the GNU AGPLv3 license."
    echo "/say You may ask an administrator for the modified source code of this program."
    echo "/say The original source code can be found at: https://github.com/Krush206/soldat-shell"
  elif echo -n ''$cmds'' | grep -qa '^\[.*] !date$'
  then
    echo "/say `date`"
  elif echo -n ''$cmds'' | grep -qa '^\[.*] !info$'
  then
    echo "/say `uname -a`"
  elif echo -n ''$cmds'' | grep -qa '^\[.*] !red$' || \
  echo -n ''$cmds'' | grep -qa '^\[.*] !1$'
  then
    echo ''$cmds'' | sed -u 's/] !.*$//;s/^\[/\/setteam1 /'
  elif echo -n ''$cmds'' | grep -qa '^\[.*] !blue$' || \
  echo -n ''$cmds'' | grep -qa '^\[.*] !2$'
  then
    echo ''$cmds'' | sed -u 's/] !.*$//;s/^\[/\/setteam2 /'
  elif echo -n ''$cmds'' | grep -qa '^\[.*] !spec$' || \
  echo -n ''$cmds'' | grep -qa '^\[.*] !5$'
  then
    echo ''$cmds'' | sed -u 's/] !.*$//;s/^\[/\/setteam5 /'
  fi
done
